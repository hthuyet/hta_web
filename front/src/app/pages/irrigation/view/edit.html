
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" ng-click="$dismiss()" aria-label="Close">
            <em class="ion-ios-close-empty sn-link-close"></em>
        </button>
        <h4 class="modal-title">{{title}}</h4>
    </div>
    <div class="modal-body" class="form-inline ng-cloak">
        <div class="row">
            <div class="alert closeable" role="alert" style="display: none;width: 80%;margin: 0 auto;" id="myAlert">
                <button type="button" class="close" aria-label="Close" onclick="$(this).parent().hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
                <span id="alertContent"><strong>Well done!</strong> You successfully read this important alert message.</span>
                <div class="clearfix2"></div>
            </div>
        </div>
        <div class="clearfix2"></div>

        <form name="myForm">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group"  ng-class="{'has-error': myForm.code.$touched && myForm.code.$invalid || myForm.code.$error.exits}">
                        <label  class="control-label col-xs-4" for="code">Mã lịch tưới</label>
                        <div class="col-xs-8">
                            <input type="text" class="form-control" name="code" placeholder="Mã lịch tưới" 
                                   ng-model="item.code" ng-readonly="item.id > 0" required>
                            <span class="help-block" ng-show="myForm.code.$touched && myForm.code.required">Mã lịch tưới là bắt buộc.</span>
                            <span class="help-block" ng-show="myForm.code.$touched && myForm.code.$invalid && !myForm.code.$error.exits">Mã lịch tưới không hợp lệ.</span>
                            <span class="help-block" ng-show="myForm.code.$error.exits">Mã lịch tưới đã tồn tại.</span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group"  ng-class="{'has-error': myForm.area_name.$touched && myForm.area_name.$invalid}">
                        <label  class="control-label col-xs-4" for="area_name">Khu vực</label>
                        <div class="col-xs-8">
<!--                            <input type="text" class="form-control" name="area_name" placeholder="Khu vực" 
                                   ng-model="item.area_name" required>-->
                            
                            <ui-select ng-model="area" name="area_name" 
                                       ng-change="onChangeArea(area)" 
                                       class="btn-group bootstrap-select" style="width: 100%;" 
                                       ng-required="true" title="Chọn khu vực">
                                <ui-select-match placeholder="Chọn khu vực...">{{$select.selected.code}} - {{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="item in lstArea | propsFilter: {name: $select.search, code: $select.search}">
                                    <div ng-bind-html="item.name | highlight: $select.search"></div>
                                    <small>
                                        Tên: {{item.name}}
                                        Mã: <span ng-bind-html="'' + item.code | highlight: $select.search"></span>
                                    </small>
                                </ui-select-choices>
                            </ui-select>
                            
                            <span class="help-block" ng-show="myForm.area_name.$touched && myForm.area_name.required">Khu vực là bắt buộc.</span>
                            <span class="help-block" ng-show="myForm.area_name.$touched && myForm.area_name.$invalid">Khu vực không hợp lệ.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clearfix2"></div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group"  ng-class="{'has-error': myForm.from_date.$touched && myForm.from_date.$invalid}">
                        <label  class="control-label col-xs-4" for="from_date">Ngày bắt đầu</label>
                        <div class="col-xs-8">
                            <p class="input-group">
                                <input type="text" class="form-control" uib-datepicker-popup="{{format}}" 
                                       datepicker-options="options" ng-model="item.fromDate" is-open="openedStart" ng-required="true" 
                                       close-text="Close" alt-input-formats="altInputFormats" show-button-bar="false" placeholder="Ngày bắt đầu" name="from_date"/>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open(0)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </p>
                            <span class="help-block" ng-show="myForm.from_date.$touched && myForm.from_date.required">Ngày bắt đầu là bắt buộc.</span>
                            <span class="help-block" ng-show="myForm.from_date.$touched && myForm.from_date.$invalid">Ngày bắt đầu không hợp lệ.</span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group"  ng-class="{'has-error': myForm.toDate.$touched && myForm.toDate.$invalid}">
                        <label  class="control-label col-xs-4" for="end_date">Ngày kết thúc</label>
                        <div class="col-xs-8">
                            <p class="input-group">
                                <input type="text" class="form-control" uib-datepicker-popup="{{format}}" 
                                       datepicker-options="options" ng-model="item.toDate" is-open="openedEnd" ng-required="true" 
                                       close-text="Close" alt-input-formats="altInputFormats" show-button-bar="false" name="toDate"/>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open(1)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </p>
                            <span class="help-block" ng-show="myForm.toDate.$touched && myForm.toDate.required">Ngày kết thúc là bắt buộc.</span>
                            <span class="help-block" ng-show="myForm.toDate.$touched && myForm.toDate.$invalid">Ngày kết thúc không hợp lệ.</span>
                        </div>
                    </div>
                </div>
            </div>
        </form>


        <div class="clearfix2"></div>

        <div class="widgets">
            <div class="row">
                <div class="col-md-12">
                    <div include-with-scope="app/pages/irrigation/widgets/irrigation_detail.html"></div>
                </div>
            </div>
        </div>

        <div class="clearfix2"></div>
    </div>
    <div class="modal-footer">
        <button type="submit" class="btn btn-primary" ng-click="save()" ladda="saving" data-style="expand-left">
            <i class="glyphicon glyphicon-floppy-disk"></i>&nbsp;&nbsp;Lưu</button>
        <button type="button" class="btn btn-default" ng-click="$dismiss()">
            <i class="glyphicon glyphicon-remove"></i>&nbsp;&nbsp;Hủy</button>
    </div>
</div>


